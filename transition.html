<<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript" src="administration_data2.js">

    </script>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      #barchart
      {
        width:100%;
        max-width:800px;
        height:70%;
      }
    </style>
  </head>
  <body>
    <div id="barchart">

    </div>
    <p class="">click here</p>
    <script type="text/javascript">
    var width=document.getElementById("barchart").clientWidth;
    var height=document.getElementById("barchart").clientHeight;



    var padding_x=width/10;
    var padding_y=height/10;


    var svg_admin_timeline=d3.select("#barchart")
            .append("svg")
            .attr("width",width)
            .attr("height",height);
console.log(height);



    var xScale=d3.scaleLinear()
              .domain([0,8])
              .range([0,width-padding_x*2]);
    var yScale=d3.scaleLinear()
                .domain([0,6])
                .range([0,height-padding_y*3]);
    var rScale = d3.scaleSqrt() // <--New!
                .domain([0, d3.max(admin_dataset[0].people, function(d) { return d.size; })])
                .range([0, height/50]);

    var color_rects=["#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c"];
    var colorScale=d3.scaleOrdinal()
                    .domain([6,5,4,3,2,1,0])
                    .range(color_rects);

// dataset=;


    svg_admin_timeline.selectAll("rect")
        .data(admin_dataset[1].levels)
        .enter()
        .append("g")
        .append("rect")
        .attr("id","back")
        .attr("x",xScale(0))
        .attr("y", yScale(-2))
        .attr("width", 30)
        .attr("height",function(d){
        return yScale(d)+padding_y*4+rScale(d);
        })
        .attr("fill",function(d)
      {
        return colorScale(d);
      })
        .attr("opacity", 0.3);

      //svg.selectAll("rect")




        d3.select("p")
                    .on("click",function(){

                    dataset=admin_dataset[0].levels//[78,123,152,456,789,258,1,2,3,4,5,6,9,10,78,25];

                    svg_admin_timeline.selectAll("rect")
                        .data(dataset)
                        .transition()
                        .attr("height",function(d){

                         return yScale(d)+padding_y*4+rScale(10-d);
                        })
                        ;
                        // .on("start", function()
                        // {
                        //   d3.select(this).attr("fill","red");
                        // })
                        // .attr("y", function(d,i){
                        //     return height-yScale(d);
                        // })

                        //.duration(1000)
                        });
    </script>
  </body>
<!-- </html>
<<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript" src="administration_data2.js">

    </script>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      #barchart
      {
        width:100%;
        max-width:800px;
        height:70%;
      }
    </style>
  </head>
  <body>
    <div id="barchart">

    </div>
    <p class="">click here</p>
    <script type="text/javascript">
    var width=document.getElementById("barchart").clientWidth;
    var height=document.getElementById("barchart").clientHeight;

    var svg_administration=d3.select("#barchart")
            .append("svg")
            .attr("width",width)
            .attr("height",height);
console.log(height);

    dataset=[5,48,57,79,33,20,35,69,100,500];



    var padding_x=width/10;
    var padding_y=height/10;

    var xScale=d3.scaleLinear()
              .domain([0,8])
              .range([0,width-padding_x*2]);
    var yScale=d3.scaleLinear()
                .domain([0,6])
                .range([0,height-padding_y*3]);
    var rScale = d3.scaleSqrt() // <--New!
                .domain([0, d3.max(admin_dataset[0].people, function(d) { return d.size; })])
                .range([0, height/50]); // <--New!


    //colorscale
    var color_rects=["#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c"];
    var colorScale=d3.scaleOrdinal()
                    .domain([6,5,4,3,2,1,0])
                    .range(color_rects);


var adm_back=svg_administration.selectAll("#barchart")
            .data(admin_dataset[1].levels)
            .enter()
            .append("g")
            .append("rect")
            .attr("id","levels")
            .attr("x",0)
            .attr("y",-yScale(2))
            .attr("width", xScale(8)+xScale(1))
            .attr("height",function(d){
              console.log("rect:"+yScale(d)+(padding_y*4)+rScale(d));
              // console.log(colorScale(d));
             return yScale(d)+padding_y*4+rScale(d);})
            // .attr("opacity",0.05)
            // .attr("stroke","red")
            .attr("fill",function(d){return colorScale(d);})
            .attr("rx",width)
            .attr("ry",height/10)
            .attr("transform","translate("+padding_x/2+","+padding_y+")");


d3.select("p")
                    .on("click",function(){

                  //  dataset=[78,123,152,456,789,258,1,2,3,4,5,6,9,10,78,25];

                  svg_administration.selectAll("#levels")
                  .data(admin_dataset[0].levels)
                  .attr("height",function(d){

                   return yScale(d)+padding_y*4+rScale(10-d);
                  })
                  .
                  .attr("fill",function(d){return colorScale(d);})
                  .transition()
                  .duration(1000000000000000000);

                        });
    </script>
  </body>
</html> -->
<!--  -->
